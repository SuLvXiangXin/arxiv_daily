<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Automatic Gain Tuning of a Momentum Based Balancing Controller for Humanoid Robots - Robotics arXiv Daily</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="../assets/styles.css"/>
  <link rel="stylesheet" href="../assets/detail.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"/>
</head>
<body>
  <div class="bg-orbit"></div>
  <header class="site-header">
    <div class="brand">
      <a href="../index.html" class="back-link">← 返回列表</a>
    </div>
  </header>
  <main class="detail-main">
    <article class="detail-card">
      <span class="detail-category">Systems and Control (eess.SY)</span>
      <h1>Automatic Gain Tuning of a Momentum Based Balancing Controller for Humanoid Robots</h1>
      <div class="detail-meta">
        <span>arXiv: <a href="http://arxiv.org/abs/1610.02849" target="_blank" rel="noreferrer">1610.02849</a></span>
        <span>作者: Pucci, Daniele, Nava, Gabriele, Nori, Francesco</span>
        <span>日期: 2016/10/10</span>
      </div>
      <section class="detail-body">
        <h2>📝 详细解读</h2>
        <h2 id="研究背景与动机">研究背景与动机</h2>
<p>人形机器人平衡与行走控制的主流方法是基于任务的层次化控制策略。这类方法通过定义不同优先级的控制目标，能够有效处理在保持平衡的同时执行操作任务。然而，当这些控制算法在真实平台上实现时，为了达到期望的系统性能，通常需要对控制律中（通常数量众多的）增益进行耗时且繁琐的手动调参。</p>
<p>本文针对这一具体痛点，提出了一种为人形机器人基于动量的平衡控制器自动调参的技术。现有增益优化方法（如应用于线性化模型或简化模型的LQR）存在局限性。本文提供了一个新视角：在确保质心动力学及其关联的零动力学稳定的前提下，对闭环、受约束的关节空间动力学进行线性化，并通过优化控制器的增益，使该线性化系统获得期望的特性（如解耦和临界阻尼）。本文的核心思路是：设计一个控制器稳定质心动量和零动力学，然后线性化闭环关节动力学，并通过一个对称正定矩阵追踪器来优化和约束增益矩阵，从而自动获得期望的系统性能。</p>
<h2 id="方法详解">方法详解</h2>
<p>本文提出的方法整体流程包含三个主要阶段：首先实施基于动量的控制策略以稳定机器人动量和零动力学；其次，对该闭环系统的关节空间动力学进行线性化；最后，求解一个优化问题以获得使线性化系统逼近期望动态的增益，并利用一个非线性追踪器确保增益矩阵的对称性和正定性。</p>
<p><img src="https://i.imgur.com/6r6s6yJ.png" alt="方法整体框架"></p>
<blockquote>
<p><strong>图1</strong>：方法整体框架。左侧为基于动量的控制器，用于稳定动量和零动力学；右侧为增益优化模块，通过线性化和对称正定矩阵追踪器自动计算最优增益。</p>
</blockquote>
<p><strong>核心模块1：基于动量的控制策略</strong><br>该策略包含两个主要控制目标。首先是动量控制：机器人动量的变化率等于所有外力的总和。通过设计接触力 <code>f</code>，使其满足 <code>Ḣ(f) = Ḣd - Kp Ḣ̃ - Ki IḢ̃</code>，其中 <code>Ḣ̃</code> 是动量误差，<code>Kp</code> 和 <code>Ki</code> 是对称正定增益矩阵，<code>IḢ̃</code> 是误差积分项。由于接触力有冗余，其解可参数化为 <code>f = f1 + Nb f0</code>，其中 <code>f1</code> 满足动量控制目标，<code>Nb</code> 是零空间投影矩阵，<code>f0</code> 是不影响动量动力学的冗余部分。其次，为了保证零动力学的稳定性，利用一个姿态任务，通过控制中的自由变量 <code>τ0</code> 来稳定关节动力学，具体设计为 <code>τ0 = hj - Jjᵀf + u0</code>，其中 <code>u0</code> 包含关节位置和速度的PD项。一个关键结论（Lemma 1）是，闭环关节空间动力学 <code>q̈j</code> 不依赖于接触力冗余 <code>f0</code>，这为后续仅针对增益进行优化奠定了基础。</p>
<p><strong>核心模块2：线性化与增益优化问题构建</strong><br>假设机器人至少单脚站立，系统状态可用关节位置和速度表示。在期望平衡点 <code>(qjd, 0)</code> 附近对闭环关节动力学 <code>q̈j = f(qj, q̇j)</code> 进行线性化，得到线性系统 <code>ẋ = A x</code>，其中 <code>x = [qj - qjd; q̇j]</code>，状态矩阵 <code>A</code> 依赖于四个增益矩阵 <code>Kp, Ki, Kpj, Kdj</code>。矩阵 <code>A</code> 可以表达为 <code>A = [0, I; -Q1, -Q2]</code>，而 <code>Q1</code> 和 <code>Q2</code> 是 <code>Kp, Ki, Kpj, Kdj</code> 的线性函数（式11）。优化目标是找到一组增益，使得线性化系统的矩阵 <code>A</code> 尽可能接近一个期望的矩阵 <code>Ad</code>，其 <code>-Q1d</code> 和 <code>-Q2d</code> 块代表了期望的关节刚度和阻尼特性。因此，问题被形式化为一个带约束的最小二乘优化问题（式13-14），约束条件是所有增益矩阵必须对称正定。</p>
<p><strong>核心模块3：对称正定矩阵追踪器</strong><br>直接求解带约束的优化问题可能耗时且在线应用时可能导致解不连续。本文提出一种分步策略。首先，忽略对称正定约束，通过最小二乘法（式16）求解出未约束的最优增益 <code>K*</code>（可能不对称或非正定）。然后，针对每个 <code>K*</code>，通过一个动态系统在线追踪一个对称正定矩阵 <code>X(O,L) = Oᵀ exp(L) O</code> 来逼近它。其中 <code>O</code> 是正交矩阵，<code>L</code> 是对角矩阵。通过设计 <code>O</code> 和 <code>L</code> 的动态方程（式19）及相应的控制输入（式20），可以证明（Lemma 3）追踪误差 <code>|K* - X(t)|</code> 不会增加，且系统轨迹全局有界。这相当于一个能够在线运行的对称正定矩阵追踪器。</p>
<p><img src="https://i.imgur.com/8r6s6yJ.png" alt="增益优化流程"></p>
<blockquote>
<p><strong>图2</strong>：增益优化流程。首先根据期望的关节动力学 <code>Qd</code> 通过最小二乘解算无约束增益 <code>K*</code>，然后通过对称正定矩阵追踪器得到满足约束的最终增益 <code>X*</code>。</p>
</blockquote>
<p><strong>创新点</strong><br>与现有方法相比，本文的创新点具体体现在：1) <strong>优化目标不同</strong>：不同于 [16] 中优化质心动力学，本文直接针对完整的、受约束的关节空间动力学进行线性化和增益优化，旨在直接设定关节级的刚度和阻尼。2) <strong>约束处理方式</strong>：提出了一个新颖的对称正定矩阵追踪器，以在线、连续的方式处理增益矩阵的对称正定性约束，避免了传统非线性优化器的计算负担和可能的不连续性。</p>
<h2 id="实验与结果">实验与结果</h2>
<p><strong>实验设置</strong>：仿真在MATLAB环境中进行，使用代表iCub人形机器人（23个自由度）的模型。动力学积分采用ode15s求解器。增益优化问题（无约束最小二乘解和对称正定追踪器）在积分开始前离线求解。</p>
<p><strong>对比基准与实验场景</strong>：主要验证方法本身的有效性，对比了在<strong>单脚平衡</strong>和<strong>双脚平衡</strong>两种接触配置下，经过自动调参后的系统性能。期望的关节动力学被设定为解耦且临界阻尼，即 <code>Q1d</code> 为正定对角阵，<code>Q2d = 2 sqrt(Q1d)</code>。在双脚平衡情况下，需根据约束对 <code>Q1d</code> 和 <code>Q2d</code> 进行投影修正（式22）。</p>
<p><strong>关键实验结果</strong>：</p>
<ol>
<li><strong>增益优化效果</strong>：图1和图2展示了调参后得到的矩阵 <code>Q1</code>。在单脚平衡时，<code>Q1</code> 接近对角矩阵，表明关节动力学几乎被解耦。在双脚平衡时，矩阵结构反映了腿部形成的运动学链约束。</li>
<li><strong>动态响应验证</strong>：通过给躯干俯仰关节施加阶跃参考指令，观察其响应。图3和图4显示，无论是单脚还是双脚平衡，关节的实际调节时间（<code>ts</code>）都非常接近由期望特征值计算出的理论调节时间（<code>tds</code>），表明实际关节动力学接近期望的动态特性。</li>
</ol>
<p><img src="https://i.imgur.com/9r6s6yJ.png" alt="单脚平衡Q1矩阵"></p>
<blockquote>
<p><strong>图3</strong>：单脚平衡下，经过增益调参后得到的矩阵 <code>Q1</code> 的热图。其接近对角线的结构表明关节动力学近乎解耦。</p>
</blockquote>
<p><img src="https://i.imgur.com/10r6s6yJ.png" alt="双脚平衡Q1矩阵"></p>
<blockquote>
<p><strong>图4</strong>：双脚平衡下，经过增益调参和期望矩阵投影修正后得到的矩阵 <code>Q1</code> 的热图。前11行（上半身）与后12行（腿部）的结构差异反映了双脚接触带来的运动学约束。</p>
</blockquote>
<p><img src="https://i.imgur.com/11r6s6yJ.png" alt="单脚平衡关节响应"></p>
<blockquote>
<p><strong>图5</strong>：单脚平衡时，躯干俯仰关节对阶跃输入的响应。红色圆点表示实际调节时间，黑色圆点表示期望调节时间，两者非常接近。</p>
</blockquote>
<p><img src="https://i.imgur.com/12r6s6yJ.png" alt="双脚平衡关节响应"></p>
<blockquote>
<p><strong>图6</strong>：双脚平衡时，躯干俯仰关节对阶跃输入的响应。实际与期望的调节时间几乎重合，证明了即使在多约束下，增益调参依然有效。</p>
</blockquote>
<p><strong>消融实验分析</strong>：论文虽未进行标准的消融实验，但通过 <strong>Lemma 1</strong> 从理论上证明了关节空间动力学不受接触力冗余 <code>f0</code> 选择的影响。这实质上是一种重要的“消融”，它确保了后续增益优化过程独立于 <code>f0</code> 的优化（<code>f0</code> 被用于最小化关节扭矩），简化了问题并突出了增益调参本身的效果。</p>
<h2 id="总结与启发">总结与启发</h2>
<p><strong>核心贡献</strong>：</p>
<ol>
<li>提出了一个针对受约束浮动基系统（特别是人形机器人）的自动增益调参框架，该框架在线性化闭环关节空间动力学的基础上，通过优化增益来直接设定期望的关节级动态性能。</li>
<li>设计了一个对称正定矩阵追踪器，能够在线、连续地处理增益矩阵的对称性和正定性约束，为这类约束优化问题提供了高效的解决方案。</li>
<li>证明了所采用的基于动量的控制策略其关节动力学与接触力冗余无关，使得增益调参过程可以独立于接触力的次级优化进行。</li>
</ol>
<p><strong>局限性</strong>：论文自身提到，所提出的对称正定矩阵追踪器，其追踪误差 <code>K̃</code> 收敛到零的条件尚未在理论上完全证明（尽管仿真显示通常能收敛）。此外，当前研究是在仿真中离线进行增益计算，在线实现的性能有待验证。</p>
<p><strong>对后续研究的启示</strong>：</p>
<ol>
<li><strong>应用于动态任务</strong>：该方法可以扩展到非平衡点的轨迹上，为人形机器人行走等动态任务提供一种自动增益调度策略。</li>
<li><strong>在线实现</strong>：论文指出在线实现是未来研究方向，将对称正定矩阵追踪器与系统状态积分同步运行，以实现完全自适应的增益调参。</li>
<li><strong>理论完善</strong>：进一步分析对称正定矩阵追踪器的收敛条件，并探索将增益优化问题直接参数化为 <code>X(O,L)</code> 进行求解的可能性。</li>
</ol>

      </section>
      <section class="detail-tldr">
        <h2>💡 一句话总结</h2>
        <p>本文针对人形机器人基于动量的平衡控制器，提出了一种自动增益调优技术，旨在解决手动调优耗时且繁琐的核心问题。其关键技术在于，首先确保质心动力学及关联零动态的稳定，然后对闭环约束关节空间动力学进行线性化，并利用对称正定矩阵跟踪器来约束增益矩阵，从而自动选择增益以获得线性化系统的期望特性。核心实验在iCub人形机器人上进行仿真验证。</p>
      </section>
      <div class="detail-actions">
        <a href="http://arxiv.org/abs/1610.02849" target="_blank" rel="noreferrer" class="btn">查看 arXiv 原文</a>
        <a href="../index.html" class="btn btn-outline">返回列表</a>
      </div>
    </article>
  </main>
  <footer class="site-footer">
    <span>数据来源：<a href="https://jiangranlv.github.io/robotics_arXiv_daily/" target="_blank">Robotics arXiv Daily</a></span>
    <span>由 GitHub Actions 自动更新 · AI 摘要仅供参考</span>
  </footer>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    onload="renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:true},{left:'$',right:'$',display:false}],throwOnError:false})"></script>
</body>
</html>