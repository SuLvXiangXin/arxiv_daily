<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Proactive Hierarchical Control Barrier Function-Based Safety Prioritization in Close Human-Robot Interaction Scenarios - Robotics arXiv Daily</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="../assets/styles.css"/>
  <link rel="stylesheet" href="../assets/detail.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"/>
</head>
<body>
  <div class="bg-orbit"></div>
  <header class="site-header">
    <div class="brand">
      <a href="../index.html" class="back-link">← 返回列表</a>
    </div>
  </header>
  <main class="detail-main">
    <article class="detail-card">
      <span class="detail-category">Robotics (cs.RO)</span>
      <h1>Proactive Hierarchical Control Barrier Function-Based Safety Prioritization in Close Human-Robot Interaction Scenarios</h1>
      <div class="detail-meta">
        <span>arXiv: <a href="http://arxiv.org/abs/2505.16055" target="_blank" rel="noreferrer">2505.16055</a></span>
        <span>作者: Maithani, Patanjali, Arab, Aliasghar, Khorrami, Farshad, Krishnamurthy, Prashanth</span>
        <span>日期: 2025/05/21</span>
      </div>
      <section class="detail-body">
        <h2>📝 详细解读</h2>
        <h2 id="研究背景与动机">研究背景与动机</h2>
<p>在制造业、医疗保健和服务业等领域，协作机器人（Cobots）被越来越多地部署在人类身边工作。这要求先进的控制策略能在不牺牲性能的前提下确保物理和心理安全。然而，在近距离人机交互场景中，实时管理碰撞风险以实现这种平衡仍然是一个重大挑战。控制屏障函数（CBF）作为一种有前景的数学工具，能够约束动态系统的控制输入，保证系统状态在期望的安全集内正向不变，从而用于避障和保障人类安全。然而，其实践应用面临几个关键挑战：CBF需要是光滑函数、需要障碍物和机器人自身状态的准确估计，并且缺乏对高风险事件的优先处理框架。此外，当同时考虑避障、关节限位、关节速度限制等多种约束时，约束间的冲突可能导致二次规划（QP）优化问题无解，从而危及安全。</p>
<p>本文针对上述痛点，特别是约束冲突下的优先级管理和不可避免碰撞下的伤害最小化问题，提出了一个新的视角。论文认为，在碰撞不可避免的情况下，机器人应主动采取控制策略来减轻潜在伤害，并根据人体不同部位的关键性（脆弱性）来动态管理碰撞风险。本文的核心思路是：提出一个基于分层CBF的框架，通过引入一个松弛变量来实现安全约束的实时优先级排序，使机器人能够优先避免对人体更关键部位（如头部）的碰撞，并在必要时“权衡”对较低优先级部位（如手部）的约束，从而始终保证优化问题的可行性。</p>
<h2 id="方法详解">方法详解</h2>
<p>所提出的安全控制框架采用分层架构，将性能控制与安全控制职责分离。</p>
<p><img src="https://..." alt="整体架构"></p>
<blockquote>
<p><strong>图5</strong>：所提出的基于CBF的安全控制器整体架构。上层性能控制器计算期望关节速度以跟踪末端执行器轨迹；下层安全控制器基于CBF和优先级机制，实时调整速度命令以确保安全，其输出为最终的安全关节速度命令。</p>
</blockquote>
<p><strong>整体流程</strong>：首先，性能控制器根据期望的末端执行器轨迹 ( p_d ) 和实际位置 ( p_{actual} )，通过逆运动学计算期望的关节速度 ( \dot{q}<em>{perf} )（公式5）。同时，外部感知系统（如ZED2i相机）实时检测人体关键部位（如头、手）的位置 ( p</em>{obs} ) 和速度 ( \dot{p}<em>{obs} )。这些信息与机器人状态一同输入到安全控制器。安全控制器构建基于距离的CBF约束，并求解一个带松弛变量的二次规划问题，得到调整后的安全关节速度 ( \dot{q}</em>{safe} )，最终发送给机器人执行。</p>
<p><strong>核心模块1：性能控制器</strong>。该控制器旨在使末端执行器跟踪期望的3D轨迹。其核心公式为：<br>[<br>\dot{q}<em>{perf} = J</em>{ee}^{\dagger} \left( \dot{p}<em>d - \Lambda (p</em>{actual} - p_d) \right) + \dot{q}<em>{mid}, \quad \Lambda &gt; 0<br>]<br>其中 ( J</em>{ee}^{\dagger} ) 是末端执行器位置雅可比矩阵的伪逆，( \dot{q}_{mid} ) 是一个零空间投影项，用于在不影响末端执行器线速度的前提下，驱使关节配置向其运动范围的中点靠拢，以提高操纵性。</p>
<p><strong>核心模块2：安全控制器与CBF设计</strong>。这是方法的核心创新点。安全控制器的目标是确保机器人各连杆与人体部位之间的距离始终大于安全阈值。</p>
<ol>
<li><strong>CBF定义</strong>：对于机器人连杆 ( j ) 和人体部位 ( i )（头或手），定义CBF函数为：<br>[<br>h_{ij}(x, p_{obs}^i) = | p_j(x) - p_{obs}^i(t) |<em>2 - (R_j + R_i) - \epsilon<br>]<br>其中 ( p_j ) 是连杆中点位置，( R_j ) 和 ( R_i ) 是包围机器人和人体部位的球体半径，( \epsilon ) 是额外的安全参数。当 ( h</em>{ij} \geq 0 ) 时，系统处于安全状态。</li>
<li><strong>安全约束</strong>：为保证安全集的正向不变性，需满足：<br>[<br>\frac{d h_{ij}(x, p_{obs}^i)}{d t} \geq -\alpha(h_{ij}(x, p_{obs}^i))<br>]<br>其中 ( \alpha ) 是扩展的类K函数，论文中取 ( \alpha(h) = \gamma h (\gamma &gt; 0) )。代入机器人速度模型 ( \dot{x} = u )（( u ) 为关节速度）和人体部位速度 ( \dot{p}<em>{obs}^i )，上述不等式可转化为关于安全关节速度 ( \dot{q}</em>{safe} ) 的线性约束。</li>
<li><strong>带优先级的优化问题</strong>：直接将所有CBF约束、关节速度限位约束与最小化速度偏差的目标组合成一个QP问题（公式14）可能会因约束冲突而无解。本文的关键创新是引入一个<strong>松弛变量</strong> ( \delta_{ha} \geq 0 ) 来对约束进行优先级排序，形成新的优化问题（公式15）：<br>[<br>\min_{ (\dot{q}<em>{safe}, , \delta</em>{ha} \geq 0) } \left( | \dot{q}<em>{safe} - \dot{q}</em>{perf} |^2 + \rho \delta_{ha}^2 \right)<br>]<br>[<br>\begin{aligned}<br>\text{s.t. } &amp; A_{hej}(J_j \dot{q}<em>{safe} - \dot{p}</em>{he}) \geq -\alpha(h_{hej}) \quad &amp;\text{(头部约束，高优先级)} \<br>&amp; A_{haj}(J_j \dot{q}<em>{safe} - \dot{p}</em>{ha}) \geq -\alpha(h_{haj}) - \delta_{ha} \quad &amp;\text{(手部约束，低优先级)} \<br>&amp; \dot{q}<em>{min} \leq \dot{q}</em>{safe} \leq \dot{q}<em>{max} \quad &amp;\text{(关节速度限位)}<br>\end{aligned}<br>]<br><strong>创新点具体体现</strong>：松弛变量 ( \delta</em>{ha} ) 仅添加在较低优先级（手部）的约束上。当所有约束可同时满足时，优化器会令 ( \delta_{ha} = 0 )，严格满足所有约束。当头部和手部约束发生冲突、原始问题无解时，优化器可以通过增大 ( \delta_{ha} ) 来“放松”手部约束，从而保证关于头部的高优先级约束始终被严格满足，并使得优化问题<strong>始终可行</strong>。此时，机器人会选择以可能违反手部安全距离为代价，来绝对保证头部的安全。</li>
<li><strong>参数作用</strong>：惩罚系数 ( \rho ) 至关重要。较大的 ( \rho ) 会对松弛行为施加严厉惩罚，使控制器仅在绝对必要时才放松手部约束，更倾向于保守安全。较小的 ( \rho ) 则降低了对松弛的惩罚，允许控制器为了更好地跟踪性能速度 ( \dot{q}_{perf} ) 而更频繁地放松手部约束，但可能增加对手部的风险。这提供了一个在<strong>安全与性能之间权衡</strong>的明确调节手段。</li>
</ol>
<h2 id="实验与结果">实验与结果</h2>
<p><strong>实验平台与数据集</strong>：方法在一个真实的机器人实验平台上进行验证。该平台包括一个7自由度的Franka Research 3协作机器人机械臂，以及一个用于实时人体姿态和身体检测的ZED2i AI 3D深度相机（图6）。实验在真实的近距离人机交互场景中进行，人类操作员在机器人工作空间内移动其头部和手部。</p>
<p><img src="https://..." alt="实验平台"></p>
<blockquote>
<p><strong>图6</strong>：实验平台。蓝色区域为Franka机器人，红色区域为ZED2i相机，绿色区域为计算系统。</p>
</blockquote>
<p><strong>对比的Baseline方法</strong>：实验主要对比了三种情况：1) <strong>无安全控制器</strong>：仅使用性能控制器。2) <strong>传统CBF方法</strong>：使用公式14的QP，不引入松弛变量（即无优先级）。3) <strong>本文提出的方法</strong>：使用带松弛变量和优先级排序的QP（公式15）。</p>
<p><strong>关键实验结果</strong>：</p>
<ol>
<li><p><strong>安全性提升</strong>：在人类突然将手部伸入机器人路径的测试中，无安全控制器会发生碰撞；传统CBF方法在约束冲突时可能导致优化失败；而本文方法始终能产生可行的控制命令，并优先保证对头部的安全距离。</p>
<p><img src="https://..." alt="距离与速度曲线"></p>
<blockquote>
<p><strong>图7</strong>：末端执行器与人体头部、手部的距离（(d_{head}), (d_{hand})）以及相对速度（(v_{rel})）随时间变化的曲线。本文提出的方法（Proposed Method）能够将到头部（高优先级）的距离始终维持在安全阈值（红色虚线）之上，而到手的距离在必要时可以低于阈值（即被松弛），体现了优先级机制。</p>
</blockquote>
</li>
<li><p><strong>松弛变量行为</strong>：实验清晰地展示了松弛变量 ( \delta_{ha} ) 如何根据冲突情况动态激活。当头部和手部约束可同时满足时，( \delta_{ha} ) 保持为0。当人类移动导致两个约束冲突时，( \delta_{ha} ) 迅速增大，以放松手部约束，确保头部约束的严格满足和问题的可行性。</p>
<p><img src="https://..." alt="松弛变量变化"></p>
<blockquote>
<p><strong>图8</strong>：松弛变量 ( \delta_{ha} ) 在实验过程中的变化。可以看到在特定时间段（约23-28秒），( \delta_{ha} ) 显著增加，这对应着手部约束与高优先级头部约束发生冲突的时刻，验证了优先级机制在实时决策中的作用。</p>
</blockquote>
</li>
<li><p><strong>参数 ( \rho ) 的影响</strong>：消融实验验证了惩罚参数 ( \rho ) 的作用。如图9所示，较大的 ( \rho ) 值导致松弛变量 ( \delta_{ha} ) 的最大值 ( \delta_{max} ) 更小，意味着对手部约束的放松更少、更谨慎，但可能以偏离期望轨迹为代价。较小的 ( \rho ) 值则允许更大的松弛，使机器人更能跟踪性能指令，但对手部的安全边际降低。</p>
<p><img src="https://..." alt="参数影响"></p>
<blockquote>
<p><strong>图9</strong>：不同惩罚参数 ( \rho ) 下，达到的最大松弛变量值 ( \delta_{max} ) 的对比。结果表明，通过调节 ( \rho )，可以有效地控制系统在安全与性能之间的权衡倾向。</p>
</blockquote>
</li>
<li><p><strong>定性结果</strong>：图10的序列图像直观展示了机器人在不同控制策略下的行为。本文方法使机器人在人类头部靠近时做出了显著且及时的避让动作。</p>
<p><img src="https://..." alt="定性结果"></p>
<blockquote>
<p><strong>图10</strong>：实验场景的定性序列图像。展示了在本文提出的安全优先级控制器作用下，机器人末端执行器（蓝色轨迹）如何主动调整轨迹，以优先规避人类头部（高优先级），同时处理手部（低优先级）的接近。</p>
</blockquote>
</li>
</ol>
<p><strong>消融实验总结</strong>：核心组件（即引入针对低优先级约束的松弛变量）的贡献通过与传统CBF（无松弛）的对比得以验证。该机制直接解决了约束冲突下的优化问题不可行性，是实现安全优先级排序的关键。参数 ( \rho ) 的调节则提供了控制“权衡”程度的灵活性。</p>
<h2 id="总结与启发">总结与启发</h2>
<p><strong>核心贡献</strong>：</p>
<ol>
<li>提出了一个用于近距离人机交互的分层控制屏障函数（CBF）框架，该框架集成了一种<strong>安全优先级机制</strong>。通过为较低优先级的安全约束引入松弛变量，使系统能够在约束冲突时进行权衡，从而确保高优先级约束（如避免碰撞头部）在任何情况下都不被违反，并始终保持优化问题的可行性。</li>
<li>在真实的协作机器人平台（Franka Research 3）上，结合高精度3D感知（ZED2i相机），对提出的方法进行了全面的<strong>实验验证</strong>。结果证明了该控制器能够在动态环境中主动减轻碰撞风险，实现安全、顺滑的人机协作。</li>
</ol>
<p><strong>局限性</strong>：论文自身提及的局限性包括：1) 方法依赖于精确和实时的人体姿态估计，感知误差会影响CBF约束的准确性。2) 将机器人和人体简化为球体集合进行碰撞检测，可能无法完全反映复杂的几何形状。3) 求解带松弛变量的QP问题需要一定的计算资源，在高速动态场景或更多约束下可能面临实时性挑战。</p>
<p><strong>对后续研究的启示</strong>：</p>
<ol>
<li><strong>优先级扩展</strong>：当前的优先级是预设的（头 &gt; 手）。未来可以探索更精细、动态的优先级分配，例如根据碰撞速度、角度或特定任务上下文来实时评估不同身体部位的风险等级。</li>
<li><strong>集成预测模块</strong>：将人类运动轨迹预测集成到CBF框架中，可以实现更早、更 proactive 的避障，进一步提升安全性和流畅性。</li>
<li><strong>复杂几何与接触</strong>：研究如何将更精确的机器人/人体几何模型以及预期的接触任务（而非仅仅避免接触）纳入基于CBF的安全控制框架中。</li>
</ol>

      </section>
      <section class="detail-tldr">
        <h2>💡 一句话总结</h2>
        <p>本文针对近距离人机交互中人类运动不可预测导致的碰撞风险问题，提出了一种基于控制屏障函数（CBF）的分层安全优先级排序框架。该方法通过引入松弛变量，实现基于人体不同部位关键性的实时约束权衡，动态管理碰撞风险，并辅以次要约束机制解决控制不可行性。实验在Franka Research 3机器人上结合ZED2i AI相机进行实时人体姿态检测，验证了该控制器能主动减轻碰撞风险，促进响应迅速且安全的人机协作，在高度动态环境中保持鲁棒性能。</p>
      </section>
      <div class="detail-actions">
        <a href="http://arxiv.org/abs/2505.16055" target="_blank" rel="noreferrer" class="btn">查看 arXiv 原文</a>
        <a href="../index.html" class="btn btn-outline">返回列表</a>
      </div>
    </article>
  </main>
  <footer class="site-footer">
    <span>数据来源：<a href="https://jiangranlv.github.io/robotics_arXiv_daily/" target="_blank">Robotics arXiv Daily</a></span>
    <span>由 GitHub Actions 自动更新 · AI 摘要仅供参考</span>
  </footer>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    onload="renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:true},{left:'$',right:'$',display:false}],throwOnError:false})"></script>
</body>
</html>